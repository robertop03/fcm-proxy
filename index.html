<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Apri la mia app</title>
  <script>
    // Funzione per leggere i parametri dalla query string
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    window.onload = function () {
      const id = getQueryParam('id');
      if (id) {
        // Costruisci il deep link custom dinamico con l'id
        const deepLink = `findyourmatch://partita/${id}`;

        // Redirect al deep link custom
        window.location.href = deepLink;
      } else {
        document.body.innerHTML = "<p>Parametro id mancante.</p>";
      }
    };
  </script>
</head>
<body>
  <p>
    Se non vieni reindirizzato automaticamente, clicca
    <a id="fallback-link" href="#">qui</a>.
  </p>

  <script>
    // Imposta il link manuale per fallback con lo stesso formato del redirect
    const id = new URLSearchParams(window.location.search).get('id');
    if (id) {
      document.getElementById('fallback-link').href = `findyourmatch://partita/${id}`;
    }
  </script>
</body>
</html>
